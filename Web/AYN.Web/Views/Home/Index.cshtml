@using System.Security.Claims
@using AYN.Web.Infrastructure.Extensions
@model AYN.Web.ViewModels.Home.IndexViewModel

@{
    this.ViewData["Title"] = "Home";
}

@if (this.User.Identity.IsAuthenticated)
{
    <form method="get" asp-controller="Ads" asp-action="Search" class="px-3">
        <partial name="_SearchBarPartial" model="this.Model" />
    </form>

    @await Component.InvokeAsync("GetAllCategoriesWithTheirSubCategories")

    <div class="text-center">
        <h3>Recent Promoted Ads</h3>
        @await Component.InvokeAsync("GetRecentlyPromotedAds");
    </div>

    <div class="text-center">
        <h3>Recent Ads</h3>
        @await Component.InvokeAsync("GetRecentAds")
    </div>

    <div class="text-center">
        <h3>Your recent ad views</h3>
        @await Component.InvokeAsync("GetUserRecentAdViews", new { userId = this.User.GetId() })
    </div>

    <div class="text-center">
        <vc:get-home-page-statistics />
    </div>
}
else
{
    <div class="content-wrapper">
        <div class="bg-light">
            <div id="index_banner" class="container-fluid pt-5">
                <div id="carouselExampleIndicators" class="carousel" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="py-2 row d-flex align-items-center">
                                <div class="col-lg-8 col-8 offset-2 m-lg-auto text-left py-5 pb-5">
                                    <h1 class="h1 text-primary display-3 mb-0 pb-5 mx-0 px-0">
                                        AYN -  <strong>All You Want...</strong>
                                    </h1>
                                    <div class="float-left">
                                        <h3 class="text-success p-4">
                                            Want a new car?<br /> Want a new coffee machine, or a brand new car?
                                            <br /><strong>Welcome to AYN - <em>Ali Baba's Cave</em></strong>
                                        </h3>
                                    </div>
                                    <a class="btn rounded-pill btn-primary btn-lg px-4 mt-2" role="button" href="/Identity/Account/Login">Getting Started</a>
                                    <a class=" btn rounded-pill btn-outline-primary btn-lg px-4 mt-2" role="button" href="/Home/About">About Us</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <section class="bg-primary">
            <div class="container pt-4">
                <div class="row d-flex justify-content-center text-center">
                    <div class="col-lg-2 col-12 text-light align-items-center">
                        <i class="display-1"></i>
                    </div>
                    <div class="col-lg-4 col-12 text-center">
                        <ul class="list-inline">
                            <li class="list-inline-item ml-5">
                                <a class="text-light" target="_blank" href="https://www.linkedin.com/in/delchevgeorgi/">
                                    <i class="fab fa-linkedin-in text-f" style="font-size:2rem;"></i>
                                </a>
                            </li>
                            <li class="list-inline-item  ml-5">
                                <a class="text-light" target="_blank" href="https://www.facebook.com/georgi.d99/">
                                    <i class="fab fa-facebook-f" style="font-size:2rem;"></i>
                                </a>
                            </li>
                            <li class="list-inline-item  ml-5">
                                <a class="text-light" target="_blank" href="https://github.com/georgidelchev">
                                    <i class="fab fa-github" style="font-size:2rem;"></i>
                                </a>
                            </li>
                            <li class="list-inline-item  ml-5">
                                <a class="text-light" target="_blank" href="mailto:allyouneedplatform@gmail.com">
                                    <i class="fas fa-envelope-open" style="font-size:2rem;"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </div>
}